<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pasong Tamo Disaster Alert System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css">
    
    <style>
        .alert-banner {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        #map {
            height: 600px;
            width: 100%;
            border-radius: 0.5rem;
        }
        .leaflet-popup-content-wrapper {
            border-radius: 8px;
            padding: 0;
        }
        .custom-popup {
            padding: 12px;
            min-width: 200px;
        }
        .map-layer-control {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-blue-800 text-white shadow-md">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fas fa-exclamation-triangle text-2xl"></i>
                <h1 class="text-xl font-bold">Pasong Tamo Disaster Alert System</h1>
            </div>
            <nav>
                <ul class="flex space-x-6">
                    <li><a href="#" class="hover:text-blue-200 transition">Home</a></li>
                    <li><a href="#alerts" class="hover:text-blue-200 transition">Alerts</a></li>
                    <li><a href="#map" class="hover:text-blue-200 transition">Map</a></li>
                    <li><a href="#resources" class="hover:text-blue-200 transition">Resources</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Alert Banner -->
    <div id="alert-banner" class="alert-banner bg-red-600 text-white py-2 px-4 text-center hidden">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fas fa-exclamation-circle"></i>
                <span id="alert-text" class="font-semibold">No active alerts</span>
            </div>
            <button id="close-alert" class="text-white hover:text-gray-200">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <main class="container mx-auto px-4 py-8">
        <!-- Hero Section -->
        <section class="mb-12 text-center">
            <h2 class="text-4xl font-bold text-gray-800 mb-4">Community Disaster Preparedness</h2>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                Stay informed and prepared with real-time disaster alerts, satellite maps, and evacuation resources for Pasong Tamo.
            </p>
        </section>

        <!-- Alerts Section -->
        <section id="alerts" class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-bell text-yellow-500 mr-2"></i> Real-Time Alerts
            </h2>
            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="border-l-4 border-yellow-500 bg-yellow-50 p-4 rounded">
                        <h3 class="font-semibold text-gray-800">Weather Advisory</h3>
                        <p class="text-sm text-gray-600 mt-1">Heavy rainfall expected in the next 24 hours.</p>
                        <span class="text-xs text-gray-500 mt-2 block">Posted: 2 hours ago</span>
                    </div>
                    <div class="border-l-4 border-orange-500 bg-orange-50 p-4 rounded">
                        <h3 class="font-semibold text-gray-800">Flood Watch</h3>
                        <p class="text-sm text-gray-600 mt-1">Low-lying areas may experience flooding.</p>
                        <span class="text-xs text-gray-500 mt-2 block">Posted: 5 hours ago</span>
                    </div>
                    <div class="border-l-4 border-green-500 bg-green-50 p-4 rounded">
                        <h3 class="font-semibold text-gray-800">All Clear</h3>
                        <p class="text-sm text-gray-600 mt-1">Previous weather disturbance has passed.</p>
                        <span class="text-xs text-gray-500 mt-2 block">Posted: 1 day ago</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Map Section -->
        <section id="map-section" class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-map-marked-alt text-blue-500 mr-2"></i> Interactive Satellite Map
            </h2>
            <div class="bg-white rounded-lg shadow-md overflow-hidden p-4">
                <div class="mb-4 flex flex-wrap gap-2 justify-between items-center">
                    <div class="flex flex-wrap gap-2">
                        <button id="toggle-satellite" class="px-4 py-2 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition">
                            <i class="fas fa-satellite mr-1"></i> Satellite View
                        </button>
                        <button id="toggle-street" class="px-4 py-2 bg-gray-500 text-white rounded-lg text-sm hover:bg-gray-600 transition">
                            <i class="fas fa-road mr-1"></i> Street View
                        </button>
                    </div>
                    <div class="flex gap-2">
                        <button id="toggle-flood" class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">
                            <i class="fas fa-water mr-1"></i> Flood Zones
                        </button>
                        <button id="toggle-safe" class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">
                            <i class="fas fa-shield-alt mr-1"></i> Safe Zones
                        </button>
                    </div>
                </div>
                
                <!-- Real Map Container -->
                <div id="map" class="shadow-lg"></div>
                
                <!-- Map Legend -->
                <div class="mt-4 p-4 bg-gray-50 rounded-lg">
                    <h3 class="font-semibold text-gray-800 mb-3">Legend</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-sm">
                        <div class="flex items-center">
                            <i class="fas fa-school text-blue-600 text-xl mr-2"></i>
                            <span>Evacuation Centers</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-exclamation-triangle text-red-500 text-xl mr-2"></i>
                            <span>Flood-Prone Areas</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-shield-alt text-green-500 text-xl mr-2"></i>
                            <span>Safe Zones</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-building text-purple-600 text-xl mr-2"></i>
                            <span>Community Centers</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Resources Section -->
        <section id="resources" class="mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-life-ring text-green-500 mr-2"></i> Emergency Resources
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Emergency Contacts -->
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Emergency Hotlines</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center p-3 bg-red-50 rounded-lg">
                            <div>
                                <h4 class="font-medium">National Emergency Hotline</h4>
                                <p class="text-sm text-gray-600">911</p>
                            </div>
                            <i class="fas fa-phone text-red-500"></i>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg">
                            <div>
                                <h4 class="font-medium">Barangay Pasong Tamo</h4>
                                <p class="text-sm text-gray-600">(02) 123-4567</p>
                            </div>
                            <i class="fas fa-phone text-blue-500"></i>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-green-50 rounded-lg">
                            <div>
                                <h4 class="font-medium">Local Disaster Risk Reduction</h4>
                                <p class="text-sm text-gray-600">(02) 765-4321</p>
                            </div>
                            <i class="fas fa-phone text-green-500"></i>
                        </div>
                    </div>
                </div>
                
                <!-- Evacuation Centers -->
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Evacuation Centers</h3>
                    <div class="space-y-3">
                        <div class="p-3 border-l-4 border-blue-500 bg-blue-50 rounded cursor-pointer hover:bg-blue-100 transition" onclick="focusOnLocation(14.6666, 121.0333)">
                            <h4 class="font-medium">Pasong Tamo Elementary School</h4>
                            <p class="text-sm text-gray-600">Capacity: 500 people</p>
                            <p class="text-xs text-blue-600 mt-1">Click to view on map</p>
                        </div>
                        <div class="p-3 border-l-4 border-green-500 bg-green-50 rounded cursor-pointer hover:bg-green-100 transition" onclick="focusOnLocation(14.6650, 121.0320)">
                            <h4 class="font-medium">Barangay Hall</h4>
                            <p class="text-sm text-gray-600">Capacity: 200 people</p>
                            <p class="text-xs text-green-600 mt-1">Click to view on map</p>
                        </div>
                        <div class="p-3 border-l-4 border-purple-500 bg-purple-50 rounded cursor-pointer hover:bg-purple-100 transition" onclick="focusOnLocation(14.6680, 121.0350)">
                            <h4 class="font-medium">Community Center</h4>
                            <p class="text-sm text-gray-600">Capacity: 300 people</p>
                            <p class="text-xs text-purple-600 mt-1">Click to view on map</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">Pasong Tamo Disaster Alert System</h3>
                    <p class="text-gray-400">A community-focused platform for disaster preparedness and real-time alerts.</p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Home</a></li>
                        <li><a href="#alerts" class="text-gray-400 hover:text-white transition">Alerts</a></li>
                        <li><a href="#map-section" class="text-gray-400 hover:text-white transition">Interactive Map</a></li>
                        <li><a href="#resources" class="text-gray-400 hover:text-white transition">Resources</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contact Us</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li class="flex items-center">
                            <i class="fas fa-map-marker-alt mr-2"></i>
                            <span>Barangay Pasong Tamo, Quezon City</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-phone mr-2"></i>
                            <span>(02) 123-4567</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-envelope mr-2"></i>
                            <span>info@pasongtamo.ph</span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400">
                <p>&copy; 2024 Pasong Tamo Disaster Alert System. Map data © OpenStreetMap contributors</p>
            </div>
        </div>
    </footer>

    <!-- Leaflet JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>

    <script>
        let map;
        let floodLayer, safeLayer;
        let isSatellite = true;
        let satelliteTiles, streetTiles;

        // Initialize the map
        document.addEventListener('DOMContentLoaded', function() {
            // Pasong Tamo coordinates
            const pasongTamo = [14.6666, 121.0333];
            
            // Initialize map
            map = L.map('map').setView(pasongTamo, 15);

            // Satellite tiles (Esri World Imagery - FREE)
            satelliteTiles = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                attribution: 'Tiles &copy; Esri',
                maxZoom: 19
            }).addTo(map);

            // Street tiles (OpenStreetMap - FREE)
            streetTiles = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; OpenStreetMap contributors',
                maxZoom: 19
            });

            // Add scale control
            L.control.scale().addTo(map);

            // Custom icons
            const schoolIcon = L.divIcon({
                html: '<i class="fas fa-school fa-2x text-blue-600"></i>',
                className: 'custom-div-icon',
                iconSize: [30, 30],
                iconAnchor: [15, 30]
            });

            const hallIcon = L.divIcon({
                html: '<i class="fas fa-building fa-2x text-green-600"></i>',
                className: 'custom-div-icon',
                iconSize: [30, 30],
                iconAnchor: [15, 30]
            });

            const centerIcon = L.divIcon({
                html: '<i class="fas fa-home fa-2x text-purple-600"></i>',
                className: 'custom-div-icon',
                iconSize: [30, 30],
                iconAnchor: [15, 30]
            });

            const warningIcon = L.divIcon({
                html: '<i class="fas fa-exclamation-triangle fa-2x text-red-500"></i>',
                className: 'custom-div-icon',
                iconSize: [30, 30],
                iconAnchor: [15, 30]
            });

            // Add evacuation centers
            L.marker([14.6666, 121.0333], {icon: schoolIcon})
                .addTo(map)
                .bindPopup('<div class="custom-popup"><h3 class="font-bold text-blue-600">Pasong Tamo Elementary School</h3><p class="text-sm mt-1">Capacity: 500 people</p><p class="text-xs text-gray-600 mt-1">Main evacuation center</p></div>');

            L.marker([14.6650, 121.0320], {icon: hallIcon})
                .addTo(map)
                .bindPopup('<div class="custom-popup"><h3 class="font-bold text-green-600">Barangay Hall</h3><p class="text-sm mt-1">Capacity: 200 people</p><p class="text-xs text-gray-600 mt-1">Secondary evacuation center</p></div>');

            L.marker([14.6680, 121.0350], {icon: centerIcon})
                .addTo(map)
                .bindPopup('<div class="custom-popup"><h3 class="font-bold text-purple-600">Community Center</h3><p class="text-sm mt-1">Capacity: 300 people</p><p class="text-xs text-gray-600 mt-1">Auxiliary evacuation center</p></div>');

            // Flood-prone areas (red zones)
            const floodZone1 = L.polygon([
                [14.6640, 121.0310],
                [14.6640, 121.0340],
                [14.6620, 121.0340],
                [14.6620, 121.0310]
            ], {
                color: 'red',
                fillColor: '#ff0000',
                fillOpacity: 0.3,
                weight: 2
            }).bindPopup('<div class="custom-popup"><h3 class="font-bold text-red-600">Flood-Prone Area 1</h3><p class="text-sm mt-1">High risk during heavy rainfall</p></div>');

            const floodZone2 = L.polygon([
                [14.6690, 121.0360],
                [14.6690, 121.0385],
                [14.6675, 121.0385],
                [14.6675, 121.0360]
            ], {
                color: 'red',
                fillColor: '#ff0000',
                fillOpacity: 0.3,
                weight: 2
            }).bindPopup('<div class="custom-popup"><h3 class="font-bold text-red-600">Flood-Prone Area 2</h3><p class="text-sm mt-1">Moderate risk area</p></div>');

            floodLayer = L.layerGroup([floodZone1, floodZone2]).addTo(map);

            // Safe zones (green circles)
            const safeZone1 = L.circle([14.6666, 121.0333], {
                color: 'green',
                fillColor: '#00ff00',
                fillOpacity: 0.2,
                radius: 150
            }).bindPopup('<div class="custom-popup"><h3 class="font-bold text-green-600">Safe Zone 1</h3><p class="text-sm mt-1">High ground - Safe during floods</p></div>');

            const safeZone2 = L.circle([14.6680, 121.0350], {
                color: 'green',
                fillColor: '#00ff00',
                fillOpacity: 0.2,
                radius: 120
            }).bindPopup('<div class="custom-popup"><h3 class="font-bold text-green-600">Safe Zone 2</h3><p class="text-sm mt-1">Elevated area - Safe location</p></div>');

            safeLayer = L.layerGroup([safeZone1, safeZone2]).addTo(map);

            // Add warning markers
            L.marker([14.6630, 121.0325], {icon: warningIcon})
                .addTo(map)
                .bindPopup('<div class="custom-popup"><h3 class="font-bold text-red-600">⚠️ Active Alert</h3><p class="text-sm mt-1">Flood warning in effect</p></div>');

            // Alert system
            const alertBanner = document.getElementById('alert-banner');
            const alertText = document.getElementById('alert-text');
            const closeAlert = document.getElementById('close-alert');
            
            setTimeout(() => {
                alertText.textContent = 'WEATHER ADVISORY: Heavy rainfall expected in the next 24 hours. Stay alert.';
                alertBanner.classList.remove('hidden');
            }, 3000);
            
            closeAlert.addEventListener('click', () => {
                alertBanner.classList.add('hidden');
            });

            // Toggle between satellite and street view
            document.getElementById('toggle-satellite').addEventListener('click', function() {
                if (!isSatellite) {
                    map.removeLayer(streetTiles);
                    satelliteTiles.addTo(map);
                    isSatellite = true;
                    this.classList.add('bg-blue-500');
                    this.classList.remove('bg-gray-500');
                    document.getElementById('toggle-street').classList.add('bg-gray-500');
                    document.getElementById('toggle-street').classList.remove('bg-blue-500');
                }
            });

            document.getElementById('toggle-street').addEventListener('click', function() {
                if (isSatellite) {
                    map.removeLayer(satelliteTiles);
                    streetTiles.addTo(map);
                    isSatellite = false;
                    this.classList.add('bg-blue-500');
                    this.classList.remove('bg-gray-500');
                    document.getElementById('toggle-satellite').classList.add('bg-gray-500');
                    document.getElementById('toggle-satellite').classList.remove('bg-blue-500');
                }
            });

            // Toggle flood zones
            let floodVisible = true;
            document.getElementById('toggle-flood').addEventListener('click', function() {
                if (floodVisible) {
                    map.removeLayer(floodLayer);
                    this.classList.remove('bg-blue-100', 'text-blue-800');
                    this.classList.add('bg-gray-200', 'text-gray-600');
                } else {
                    floodLayer.addTo(map);
                    this.classList.add('bg-blue-100', 'text-blue-800');
                    this.classList.remove('bg-gray-200', 'text-gray-600');
                }
                floodVisible = !floodVisible;
            });

            // Toggle safe zones
            let safeVisible = true;
            document.getElementById('toggle-safe').addEventListener('click', function() {
                if (safeVisible) {
                    map.removeLayer(safeLayer);
                    this.classList.remove('bg-green-100', 'text-green-800');
                    this.classList.add('bg-gray-200', 'text-gray-600');
                } else {
                    safeLayer.addTo(map);
                    this.classList.add('bg-green-100', 'text-green-800');
                    this.classList.remove('bg-gray-200', 'text-gray-600');
                }
                safeVisible = !safeVisible;
            });
        });

        // Function to focus on specific location
        function focusOnLocation(lat, lng) {
            map.setView([lat, lng], 17);
            document.getElementById('map-section').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>